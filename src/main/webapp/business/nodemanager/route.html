<link href="../../jslib/bootstrap-2.3.1/css/bootstrap.min.css"
	rel="stylesheet" media="screen">
<link id="easyuiTheme" rel="stylesheet"
	href="../../jslib/jquery-easyui-1.3.4/themes/bootstrap/easyui.css"
	type="text/css">
<link id="easyuiTheme" rel="stylesheet"
	href="../../jslib/jquery-easyui-1.3.4/themes/icon.css" type="text/css">
<script type="text/javascript" src="../../jslib/jquery-2.0.0.js"
	charset="utf-8"></script>
<script type="text/javascript"
	src="../../jslib/jquery-easyui-1.3.4/jquery.easyui.min.js"
	charset="utf-8"></script>
<script type="text/javascript"
	src="../../jslib/jquery-easyui-1.3.4/locale/easyui-lang-zh_CN.js"
	charset="utf-8"></script>
<script type="text/javascript" src="../../jslib/extEasyUI.js"
	charset="utf-8"></script>

<script src="../../js/common/common.js"></script>

<html>
<head>
<title>路由管理</title>
<style type="text/css">
#editNodeForm {
	margin: 0;
	padding: 10px 10px;
}

#addNodeForm {
	margin: 0;
	padding: 10px 10px;
}

.ftitle {
	font-size: 14px;
	font-weight: bold;
	padding: 5px 0;
	margin-bottom: 10px;
	border-bottom: 1px solid #ccc;
}

.fitem {
	margin-bottom: 5px;
}

.fitem label {
	display: inline-block;
	width: 120px;
}
</style>
<script type="text/javascript">
	var listNode;
	var isSubmitFormNew = false;
	$(document)
			.ready(
					function() {
						$("#mcodeNew")
								.blur(
										function() {
											var mcode = $("#mcodeNew").val();
											if (mcode == '' || mcode == null) {
												$('#mcodeTips')
														.html(
																'<font color="red">*请输入机器码license！</font>');
												isSubmitFormNew = false;
											} else {
												$
														.ajax({
															type : "POST",
															url : getBasePath()
																	+ "/business/validMCode",
															data : "mcode="
																	+ mcode,
															success : function(
																	data) {
																var result = $.parseJSON(data);
																if (result.success == false) {
																	$(
																			'#mcodeTips')
																			.html(
																					'<font color="red">*'
																							+ result.msg
																							+ '</font>');
																	isSubmitFormNew = false;
																} else {
																	$(
																			'#mcodeTips')
																			.html(
																					'');
																	$(
																			'#ndNameNew')
																			.val(
																					result.obj);
																	isSubmitFormNew = true;
																}
															}
														});
											}
										});

						/* 	$("#ndNameNew").blur(
								function() {
									var ndName = $("#ndNameNew").val();
									if (ndName == '' || ndName == null) {
										$('#ndNameTips').html(
												'<font color="red">*请输入机器码</font>');
										isSubmitFormNew = false;
									} else {
										$.ajax({
											type : "POST",
											url : getBasePath()
													+ "/business/validNdName",
											data : "ndName=" + ndName,
											success : function(result) {
												 var result = $.parseJSON(data); 
												if (result.success == false) {
													$('#ndNameTips').html(
															'<font color="red">*'
																	+ result.msg
																	+ '</font>');
													isSubmitFormNew = false;
												} else {
													$('#ndNameTips').html('');
													isSubmitFormNew = true;
												}
											}
										});
									}
								});  */
					});
	$(function() {
		$("#isLimitSpeed").hide();
		$("#isLimitSpeedNew").hide();
		/* $('#smsInfoEdit').hide(); */

		  $('#loginTypeEdit').combobox({
			onSelect : function(rec) {
				if (rec.value == '3') {
					$('#smsInfoEdit').show();
				} else {
					$('#smsInfoEdit').hide();
				}
			}
		});  
		  
		  $('#loginTypeAdd').combobox({
				onSelect : function(rec) {
					if (rec.value == '3') {
						$('#smsInfoNew').show();
					} else {
						$('#smsInfoNew').hide();
					}
				}
			}); 
		  
		  $('#smsCodeLengthEdit').numberbox({
				required : true,
				min : 6,
				max : 20,
				missingMessage : "有效值为6~20"
			});
		  $('#smsCodeDayNumEdit').numberbox({
				required : true,
				min : 1,
				missingMessage : "有效值必须大于1"
			});
		  
		  $('#smsCodeObtainIntervalEdit').numberbox({
				required : true,
				min : 1,
				missingMessage : "有效值必须大于1"
			});
		  $('#smsCodeValidTimeEdit').numberbox({
				required : true,
				min : 1,
				missingMessage : "有效值必须大于1"
			});
		  
		  $('#smsCodeLengthNew').numberbox({
				required : true,
				min : 6,
				max : 20,
				missingMessage : "有效值为6~20"
			});
		  $('#smsCodeDayNumNew').numberbox({
				required : true,
				min : 1,
				missingMessage : "有效值必须大于1"
			});
		  
		  $('#smsCodeObtainIntervalNew').numberbox({
				required : true,
				value : 1,
				min : 1,
				missingMessage : "有效值必须大于1"
			});
		  $('#smsCodeValidTimeNew').numberbox({
				required : true,
				min : 1,
				missingMessage : "有效值必须大于1"
			});


		listNode = $('#listNode').datagrid({
			url : getBasePath() + "/business/listNode",
			fit : true,
			fitColumns : true,
			border : false,
			idField : 'id',
			nowrap : false,
			remoteSort : false,
			singleSelect : false,//是否单选  
			pagination : true,//分页控件  
			rownumbers : true,//行号  
			pageSize : 20,
			frozenColumns : [ [ {
				field : 'ndName',
				title : '热点名',
				width : 200,
				sortable : false,
				formatter : function(value, row, index) {
					if (row.aliasName != null && row.aliasName != '') {
						return row.aliasName;
					} else {
						return value;
					}
				}
			} ] ],
			columns : [ [ {
				field : 'industry',
				title : '所属行业',
				width : 100,
				sortable : false,
				formatter : function(value, row, index) {
					if (value == 0) {
						return '咖啡厅(COFFEE SHOP)';
					} else if (value == 1) {
						return '西餐厅(WESTERN RESTAURANT)';
					} else if (value == 2) {
						return '中餐厅(CHINESE RESTAURANT)';
					} else if (value == 3) {
						return '茶楼(TEA SHOP)';
					} else if (value == 4) {
						return '会所(CHAMBER)';
					} else if (value == 5) {
						return '便利店(CONVENIENCE STORE)';
					} else if (value == 6) {
						return '饮品店(DRINK SHOP)';
					} else if (value == 7) {
						return '小区(HOUSINGESTATE)';
					} else if (value == 8) {
						return '出租屋(LET)';
					} else if (value == 9) {
						return '学校(SCHOOL)';
					} else if (value == 10) {
						return '工厂(FACTORY)';
					} else if (value == 11) {
						return '公司(COMPANY)';
					} else if (value == 12) {
						return '其它(OTHER)';
					} else {
						return '';
					}
				}
			}, {
				field : 'updateTime',
				title : '更新时间',
				width : 100,
				sortable : false,
				formatter : function(value, row, index) {
					var d = new Date(value);
					return d.format("yyyy-MM-dd HH:mm:ss");
				}
			}, {
				field : 'nodeStatus',
				title : '激活状态',
				width : 50,
				sortable : false,
				formatter : function(value, row, index) {
					if (value == 0) {
						return '正常';
					} else {
						return '未激活';
					}
				}
			}, {
				field : 'mcode',
				title : '机器码license',
				width : 100,
				sortable : false
			}, {
				field : 'remainSms',
				title : '短信剩余条数',
				width : 100,
				sortable : false,
				formatter : function(value, row, index) {
					if (value < 2000) {
						return value + "(短信少于100条)";
					} else {
						return value
					}
				}
			}, {
				field : 'nodeLever',
				title : '操作',
				width : 100,
				sortable : false,
				formatter : function(value, row, index) {
					var d = new Date(value.endTime);
					if (value.lever.vip == "vip1") {
						return "<a href='#' onclick=upgrade1("
						+ JSON.stringify(value) + ")>升级</a>";
					} else if(value.lever.vip == "vip4"){
						if (d.format("yyyy-MM-dd") != "2030-12-31") {
							return "<a href='#' onclick=renewal("
							+ JSON.stringify(value) + ")>续期</a>";
						}
						
					} else {
						if (d.format("yyyy-MM-dd") != "2030-12-31") {
							return "<a href='#' onclick=upgrade2("
							+ JSON.stringify(value) + ")>升级</a>&nbsp;&nbsp;<a href='#' onclick=renewal("
							+ JSON.stringify(value) + ")>续期</a>";
						} else {
							return "<a href='#' onclick=upgrade2("
							+ JSON.stringify(value) + ")>升级</a>";
						}
					}
				}
			}] ],
			toolbar : '#toolbar'
		});

		//设置分页控件  
		var p = $('#listNode').datagrid('getPager');
		$(p).pagination({
			pageSize : 20,//每页显示的记录条数，默认为10  
			pageList : [ 20, 25, 30 ],//可以设置每页记录条数的列表  
			beforePageText : '第',//页数文本框前显示的汉字  
			afterPageText : '页    共 {pages} 页',
			displayMsg : '当前显示 {from} - {to} 条记录   共 {total} 条记录',
		/*onBeforeRefresh:function(){ 
		    $(this).pagination('loading'); 
		    alert('before refresh'); 
		    $(this).pagination('loaded'); 
		}*/
		});
	});

	function destroyNode() {
		var row = $('#listNode').datagrid('getSelected');
		if (row) {
			$.messager.confirm('Confirm', '你确定要删除此节点吗?', function(r) {
				if (r) {
					$.ajax({
						type : "POST",
						url : getBasePath() + "/business/deleteNode",
						data : {id : row.id,
							ndName : row.ndName
						},
						success : function(data) {
							var result = $.parseJSON(data);
							if (result.success == false) {
								$.messager.show({
									title : 'Error',
									msg : result.msg
								});
							} else {
								$('#listNode').datagrid('reload');
								$('#listNode').datagrid('clearSelections');
							}
						}
					});
					/* $.post(getBasePath() + "/business/deleteNode", {
						id : row.id,
						ndName : row.ndName
					}, function(data) {
						var result = $.parseJSON(data);
						if (result.success == false) {
							$.messager.show({
								title : 'Error',
								msg : result.msg
							});
						} else {
							$('#listNode').datagrid('reload');
							$('#listNode').datagrid('clearSelections');
						}
					}, 'json'); */
				}
			});
		}
	}

	function editNode() {
		var row = $('#listNode').datagrid('getSelected');
		if (row) {
			$('#editNodeDlg').dialog('open').dialog('setTitle', '修改');
			$('#editNodeForm').form('load', row);
			$('#loginTypeEdit').combobox('select', row.loginType);
			$('#industryEdit').combobox('select', row.industry);
			$('#smsVerifyTemplateEdit').combobox({
				 url : getBasePath() + "/business/smsVerifyTemplate",
				 valueField : 'id',
				 textField : 'smsContent',
			});
			$('#smsVerifyTemplateEdit').combobox('setValue', row.smsContentID);
		}

	}

	function saveEditNode() {
		$('#editNodeForm').form('submit', {
			url : getBasePath() + "/business/editNode",
			onSubmit : function() {
				return $(this).form('validate');
			},
			success : function(data) {
				var result = $.parseJSON(data);
				if (result.success == false) {
					$.messager.show({
						title : 'Error',
						msg : result.msg
					});
				} else {
					$('#editNodeDlg').dialog('close');
					$('#listNode').datagrid('reload');
					$('#listNode').datagrid('clearSelections');
				}
			}
		});
	}

	function hide(name) {
		$("#" + name).hide();
	}

	function show(name) {
		$("#" + name).show();
	}

	function addNode() {
		$('#addNodeDlg').dialog('open').dialog('setTitle', '新增');
		$('#addNodeForm')[0].reset();
		/* 		$('#venderUser').combobox({
		 url : getBasePath() + "/node/listUser?userType=1",
		 valueField : 'id',
		 textField : 'companyName'
		 });
		 $('#businessUser').combobox({
		 url : getBasePath() + "/node/listUser?userType=2",
		 valueField : 'id',
		 textField : 'companyName'
		 }); */
		isSubmitFormNew = false;
		$('#ndNameTips').html('');
		$('#loginTypeAdd').combobox('select', 1);
		$('#industryAdd').combobox('select', 12);
		$('#smsVerifyTemplateNew').combobox({
			 url : getBasePath() + "/business/smsVerifyTemplate",
			 valueField : 'id',
			 textField : 'smsContent',
		});
		$('#smsCodeObtainIntervalNew').numberbox("setValue", 1);
		$('#smsCodeLengthNew').numberbox("setValue", 6);
		
		/* $('#user_id').combobox({
			url : getBasePath()+"/user/all",
			editable : false,
			valueField :'user_id',
			textField : 'user_id',
			multiple : false,
			onSelect:function(data){
			}		
		});
		$('#v_user_id').combobox({
			url : getBasePath()+"/v_user/get_all_hive_db",
			editable : false,
			valueField :'hive_db',
			textField : 'hive_db',
			multiple : false,
			onSelect:function(data){
			}		
		}); */
	}

	function saveNewNode() {
		if (isSubmitFormNew == true) {
			$('#addNodeForm').form('submit', {
				url : getBasePath() + "/business/addNode",
				onSubmit : function() {
					return $(this).form('validate');
				},
				success : function(data) {
					/* var result = eval('('+result+')'); */
					var result = $.parseJSON(data);
					if (result.success == false) {
						$.messager.show({
							title : 'Error',
							msg : result.msg
						});
					} else {
						$('#addNodeDlg').dialog('close');
						$('#listNode').datagrid('reload');
						$('#listNode').datagrid('clearSelections');
					}
				}
			});
		}
	}
	
	function upgrade1(nodeLever) {
		$('#upgradeDlg1').dialog('open').dialog('setTitle', '热点升级');
		$('#upgradeForm1')[0].reset();
		$('#totalPrice').html('');
		$('#nodeID').val(nodeLever.nodeID);
		$.ajax({
			type : "POST",
			url : getBasePath() + "/business/acountInfo",
			success : function(data) {
				var result = $.parseJSON(data);  
				if (result.success == false) {
					$.messager.show({
						title : 'Error',
						msg : result.msg
					});
				} else {
					$('#remainAcount').html(result.obj + "元");
				}
			}
		});
		$('#nodeLever').html(nodeLever.lever.vip);
		var d = new Date(nodeLever.endTime);
		$('#endTime').html(d.format("yyyy-MM-dd"));
		$('#upgradeLeverID').combobox({
			url : getBasePath()+"/business/listLever?nodeID=" + nodeLever.nodeID,
			valueField : 'id',
			textField : 'description',
			onSelect:function(rec){
				var validTime = $('#validTime').combobox('getValue');
				var validTimeType = $('#validTimeType').combobox('getValue');
				if (validTime != null && validTime != "" && validTimeType != null && validTimeType != "") {
					$.ajax({
						type : "POST",
						url : getBasePath() + "/business/upgradeNodePrice",
						data : {
							nodeID : nodeLever.nodeID,
							upgradeLeverID : rec.id,
							validTimeType : validTimeType,
							validTime : validTime
						},
						success : function(data) {
							var result = $.parseJSON(data);  
							if (result.success == false) {
								$('#totalPrice').html(result.obj);
							} else {
								$('#totalPrice').html(result.obj + "元");
							}
						}
					});
				}
			}		
		});
		$('#validTimeType').combobox({
			url : 'validtimetype.json',
			valueField : 'id',
			textField : 'text',
			onSelect:function(rec){
				var validTime = $('#validTime').combobox('getValue');
				var upgradeLeverID = $('#upgradeLeverID').combobox('getValue');
				if (validTime != null && validTime != "" && upgradeLeverID != null && upgradeLeverID != "") {
					$.ajax({
						type : "POST",
						url : getBasePath() + "/business/upgradeNodePrice",
						data : {
							nodeID : nodeLever.nodeID,
							upgradeLeverID : upgradeLeverID,
							validTimeType : rec.id,
							validTime : validTime
						},
						success : function(data) {
							var result = $.parseJSON(data);  
							if (result.success == false) {
								$('#totalPrice').html(result.obj);
							} else {
								$('#totalPrice').html(result.obj + "元");
							}
						}
					});
				}
			}		
		});
		$('#validTime').combobox({
			url : 'validtime.json',
			valueField : 'id',
			textField : 'text',
			onSelect:function(rec){
				var validTimeType = $('#validTimeType').combobox('getValue');
				var upgradeLeverID = $('#upgradeLeverID').combobox('getValue');
				if (validTimeType != null && validTimeType != "" && upgradeLeverID != null && upgradeLeverID != "") {
					$.ajax({
						type : "POST",
						url : getBasePath() + "/business/upgradeNodePrice",
						data : {
							nodeID : nodeLever.nodeID,
							upgradeLeverID : upgradeLeverID,
							validTimeType : validTimeType,
							validTime : rec.id
						},
						success : function(data) {
							var result = $.parseJSON(data);  
							if (result.success == false) {
								$('#totalPrice').html(result.obj);
							} else {
								$('#totalPrice').html(result.obj);
							}
						}
					});
				}
			}		
		});
	}
	
	function saveUpgrade() {
			$('#upgradeForm1').form('submit', {
				url : getBasePath() + "/business/upgradeNodeLever",
				onSubmit : function() {
					return $(this).form('validate');
				},
				success : function(data) {
					/* var result = eval('('+result+')'); */
					var result = $.parseJSON(data);
					if (result.success == false) {
						$.messager.show({
							title : 'Error',
							msg : result.msg
						});
					} else {
						$('#upgradeDlg1').dialog('close');
						$('#listNode').datagrid('reload');
						$('#listNode').datagrid('clearSelections');
					}
				}
			});
	}
	
	function upgrade2(nodeLever) {
		$('#upgradeDlg2').dialog('open').dialog('setTitle', '热点升级');
		$('#upgradeForm2')[0].reset();
		$('#totalPrice2').html('');
		$('#nodeID2').val(nodeLever.nodeID);
		$.ajax({
			type : "POST",
			url : getBasePath() + "/business/acountInfo",
			success : function(data) {
				var result = $.parseJSON(data);  
				if (result.success == false) {
					$.messager.show({
						title : 'Error',
						msg : result.msg
					});
				} else {
					$('#remainAcount2').html(result.obj + "元");
				}
			}
		});
		$('#nodeLever2').html(nodeLever.lever.vip);
		var d = new Date(nodeLever.endTime);
		$('#endTime2').html(d.format("yyyy-MM-dd"));
		$('#upgradeLeverID2').combobox({
			url : getBasePath()+"/business/listLever?nodeID=" + nodeLever.nodeID,
			valueField : 'id',
			textField : 'description',
			onSelect:function(rec){
				if (validTime != null && validTime != "" && validTimeType != null && validTimeType != "") {
					$.ajax({
						type : "POST",
						url : getBasePath() + "/business/upgradeNodePrice",
						data : {
							nodeID : nodeLever.nodeID,
							upgradeLeverID : rec.id
						},
						success : function(data) {
							var result = $.parseJSON(data);  
							if (result.success == false) {
								$('#totalPrice2').html(result.obj);
							} else {
								$('#totalPrice2').html(result.obj);
							}
						}
					});
				}
			}		
		});
	}
	
	function saveUpgrade2() {
		$('#upgradeForm2').form('submit', {
			url : getBasePath() + "/business/upgradeNodeLever",
			onSubmit : function() {
				return $(this).form('validate');
			},
			success : function(data) {
				/* var result = eval('('+result+')'); */
				var result = $.parseJSON(data);
				if (result.success == false) {
					$.messager.show({
						title : 'Error',
						msg : result.msg
					});
				} else {
					$('#upgradeDlg2').dialog('close');
					$('#listNode').datagrid('reload');
					$('#listNode').datagrid('clearSelections');
				}
			}
		});
}
	function renewal(nodeLever) {
		$('#renewalDlg').dialog('open').dialog('setTitle', '热点续期');
		$('#renewalForm')[0].reset();
		$('#renewalTotalPrice').html('');
		$('#renewalNodeID').val(nodeLever.nodeID);
		$.ajax({
			type : "POST",
			url : getBasePath() + "/business/acountInfo",
			success : function(data) {
				var result = $.parseJSON(data);  
				if (result.success == false) {
					$.messager.show({
						title : 'Error',
						msg : result.msg
					});
				} else {
					$('#renewalRemainAcount').html(result.obj + "元");
				}
			}
		});
		$('#renewalNodeLever').html(nodeLever.lever.vip);
		var d = new Date(nodeLever.endTime);
		$('#renewalEndTime').html(d.format("yyyy-MM-dd"));
		$('#renewalValidTimeType').combobox({
			url : 'validtimetype.json',
			valueField : 'id',
			textField : 'text',
			onSelect:function(rec){
				var validTime = $('#renewalValidTime').combobox('getValue');
				if (validTime != null && validTime != "") {
					$.ajax({
						type : "POST",
						url : getBasePath() + "/business/renewalNodeLeverPrice",
						data : {
							nodeID : nodeLever.nodeID,
							validTimeType : rec.id,
							validTime : validTime
						},
						success : function(data) {
							var result = $.parseJSON(data);  
							if (result.success == false) {
								$('#renewalTotalPrice').html(result.obj);
							} else {
								$('#renewalTotalPrice').html(result.obj);
							}
						}
					});
				}
			}		
		});
		$('#renewalValidTime').combobox({
			url : 'validtime.json',
			valueField : 'id',
			textField : 'text',
			onSelect:function(rec){
				var validTimeType = $('#renewalValidTimeType').combobox('getValue');
				if (validTimeType != null && validTimeType != "") {
					$.ajax({
						type : "POST",
						url : getBasePath() + "/business/renewalNodeLeverPrice",
						data : {
							nodeID : nodeLever.nodeID,
							validTimeType : validTimeType,
							validTime : rec.id
						},
						success : function(data) {
							var result = $.parseJSON(data);  
							if (result.success == false) {
								$('#renewalTotalPrice').html(result.obj);
							} else {
								$('#renewalTotalPrice').html(result.obj);
							}
						}
					});
				}
			}		
		});
	}
	
	function saveRenewal() {
		$('#renewalForm').form('submit', {
			url : getBasePath() + "/business/renewalNodeLever",
			onSubmit : function() {
				return $(this).form('validate');
			},
			success : function(data) {
				/* var result = eval('('+result+')'); */
				var result = $.parseJSON(data);
				if (result.success == false) {
					$.messager.show({
						title : 'Error',
						msg : result.msg
					});
				} else {
					$('#renewalFormDlg').dialog('close');
					$('#listNode').datagrid('reload');
					$('#listNode').datagrid('clearSelections');
				}
			}
		});
}
</script>
</head>
<body>
	<div class="easyui-layout"
		style="width: 600PX; height: 500PX; border-left: 0px; MARGIN-LEFT: -1PX;"
		data-options="fit : true,border : false">
		<div data-options="region:'center',border:false"
			style="border-left: 0px; margin-left: -1px;">
			<table id="listNode"></table>
		</div>
	</div>

	<div id="toolbar" style="display: none;">
		<div style="float: left">
			<a onClick="addNode();" href="javascript:void(0);"
				class="easyui-linkbutton"
				data-options="plain:true,iconCls:'icon-add'">添加</a> <a
				onClick="editNode();" href="javascript:void(0)"
				class="easyui-linkbutton" iconCls="icon-edit" plain="true">编辑</a> <a
				onClick="destroyNode();" href="javascript:void(0)"
				class="easyui-linkbutton" iconCls="icon-remove" plain="true">删除</a>
		</div>
	</div>
	<div id="editNodeDlg" class="easyui-dialog"
		style="width: 550px; height: 600px; padding: 10px 20px" closed="true"
		buttons="#editNodeDlg-button">
		<form id="editNodeForm" method="POST" novalidate>
			<div class="ftitle">路由信息</div>
			<input id="id" type="hidden" name="id" />
			<div class="fitem">
				<label>热点名:</label> <input id="ndNameEdit" name="ndName" type="text"
					readOnly>
			</div>
			<div class="fitem">
				<label>别 名:</label> <input id="aliasName" name="aliasName"
					type="text">
			</div>
			<div class="fitem">
				<label>机器码license:</label> <input id="mcodeEdit" name="mcode"
					type="text" readOnly>
			</div>
			<div class="fitem">
				<label>所属行业:</label> <select id="industryEdit"
					class="easyui-combobox" name="industry"
					data-options="editable:false">
					<option value="0">咖啡厅(COFFEE SHOP)</option>
					<option value="1">西餐厅(WESTERN RESTAURANT)</option>
					<option value="2">中餐厅(CHINESE RESTAURANT)</option>
					<option value="3">茶楼(TEA SHOP)</option>
					<option value="4">会所(CHAMBER)</option>
					<option value="5">便利店(CONVENIENCE STORE)</option>
					<option value="6">饮品店(DRINK SHOP)</option>
					<option value="7">小区(HOUSINGESTATE)</option>
					<option value="8">出租屋(LET)</option>
					<option value="9">学校(SCHOOL)</option>
					<option value="10">工厂(FACTORY)</option>
					<option value="11">公司(COMPANY)</option>
					<option value="12">其它(OTHER)</option>
				</select>
			</div>
			<div class="fitem">
				<label>硬性断开时间:</label> <input id="turnOffTime" name="turnOffTime"
					type="text" data-options="required:true" />
			</div>
			<div class="fitem">
				<label>空闲断开时间:</label> <input id="turnOffFreeTime"
					name="turnOffFreeTime" type="text" data-options="required:true" />
			</div>
			<div class="fitem">
				<label>多终端登录:</label> <input style="width: 20px;"
					id="multiTerminalLogin" name="multiTerminalLogin" type="radio"
					value="0" data-options="required:true" checked="true"> 禁止
				&nbsp;&nbsp;&nbsp;&nbsp; <input style="width: 20px;"
					id="multiTerminalLogin" name="multiTerminalLogin" type="radio"
					value="1" data-options="required:true"> 允许<br />
			</div>
			<div class="fitem">
				<label>单IP限速:</label> <input style="width: 20px;" id="limitSpeedNo"
					name="limitSpeed" type="radio" value="0"
					data-options="required:true" checked="true"
					onclick="hide('isLimitSpeed')"> 不启用
				&nbsp;&nbsp;&nbsp;&nbsp; <input style="width: 20px;"
					id="limitSpeedYes" name="limitSpeed" type="radio" value="1"
					data-options="required:true" onclick="show('isLimitSpeed')">
				启用<br />
			</div>
			<div id="isLimitSpeed" class="fitem">
				&nbsp;&nbsp;&nbsp;&nbsp;<label>总下载宽带:</label> <input
					id="totalLimitIncoming" name="totalLimitIncoming"
					data-options="required:true" /><br /> &nbsp;&nbsp;&nbsp;&nbsp;<label>总上传带宽:</label>
				<input id="totalLimitOutgoing" name="totalLimitOutgoing" type="text"
					data-options="required:true" /><br /> &nbsp;&nbsp;&nbsp;&nbsp;<label>每用户下载带宽:</label>
				<input id="eachLimitIncoming" name="eachLimitIncoming" type="text"
					data-options="required:true" /><br /> &nbsp;&nbsp;&nbsp;&nbsp;<label>每用户上传带宽:</label>
				<input id="eachLimitOutgoing" name="eachLimitOutgoing" type="text"
					data-options="required:true" /><br />

			</div>
			<div class="fitem">
				<label>开放开始时间:</label> <input id="startTime"
					class="easyui-timespinner" name="startTime" required="required"
					data-options="min:'00:00',showSeconds:true" />
			</div>
			<div class="fitem">
				<label>开放结束时间:</label> <input id="endTime"
					class="easyui-timespinner" name="endTime" required="required"
					data-options="min:'00:00',showSeconds:true" />
			</div>
			<div class="fitem">
				<label>重定向页面:</label> <input id="portalUrl" name="portalUrl"
					type="text" />
			</div>

			<div class="fitem">
				<label>是否激活:</label> <input style="width: 20px;" id="nodeStatus"
					name="nodeStatus" type="radio" value="0"
					data-options="required:true" checked="true"> 是
				&nbsp;&nbsp;&nbsp;&nbsp; <input style="width: 20px;" id="nodeStatus"
					name="nodeStatus" type="radio" value="1"
					data-options="required:true"> 否
			</div>

			<div class="fitem">
				<label>认证方式:</label> <select id="loginTypeEdit"
					class="easyui-combobox" name="loginType" style="width: 200px;"
					data-options="editable:false">
					<option value="1">不需认证</option>
					<option value="2">用户认证</option>
					<option value="3">短信验证码认证</option>
				</select>
			</div>
			<div id="smsInfoEdit" class="fitem">
				&nbsp;&nbsp;&nbsp;&nbsp;<label>短信验证码内容:</label> 
				<input id="smsVerifyTemplateEdit" name="smsVerifyTemplate"><br />
				&nbsp;&nbsp;&nbsp;&nbsp;<label>短信验证码长度:</label> <input
					id="smsCodeLengthEdit" name="smsCodeLength"/>
			<br /> &nbsp;&nbsp;&nbsp;&nbsp;<label>一天获取次数:</label>
				<input id="smsCodeDayNumEdit" name="smsCodeDayNum" value="3"/>
					<br/> &nbsp;&nbsp;&nbsp;&nbsp;<label>获取间隔:</label>
				<input id="smsCodeObtainIntervalEdit" name="smsCodeObtainInterval"/>分钟<br />
				 &nbsp;&nbsp;&nbsp;&nbsp;<label>验证码类型:</label>
				<input style="width: 20px;" id="smsType"
					name="smsType" type="radio" value="1"
					data-options="required:true" checked="true"> 一次性
				&nbsp;&nbsp;&nbsp;&nbsp; <input style="width: 20px;" id="smsType"
					name="smsType" type="radio" value="2"
					data-options="required:true"> 可多次登录<br />
				&nbsp;&nbsp;&nbsp;&nbsp;<label>验证码有效时间:</label>
				<select id="smsCodeValidTypeEdit"
					class="easyui-combobox" name="smsCodeValidType" style="width: 200px;"
					data-options="editable:false">
					<option value="1">分钟(从获取验证码开始计算)</option>
					<option value="2" selected>小时(从获取验证码开始计算)</option>
					<option value="3">天(从获取验证码开始计算)</option>
				</select>
				<input id="smsCodeValidTimeEdit" name="smsCodeValidTime" style="width: 50px;" value="2"/>
			</div>
		</form>
	</div>
	<div id="editNodeDlg-button">
		<a href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-ok" onClick="saveEditNode()">保存</a> <a
			href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-cancel"
			onClick="javascript:$('#editNodeDlg').dialog('close')">取消</a>
	</div>

	<div id="addNodeDlg" class="easyui-dialog"
		style="width: 550px; border: 0PX; BORDER-TOP: 1PX solid #DADADA;; height: 600px; padding: 10px 20px 20PX 10PX;"
		closed="true" buttons="#addNodeDlg-button">
		<form id="addNodeForm" method="POST" novalidate>
			<div class="ftitle">路由信息</div>
			<div class="fitem">
				<label>热点名:</label> <input id="ndNameNew" name="ndName" type="text"
					readOnly>
			</div>
			<div class="fitem">
				<label>别 名:</label> <input id="aliasName" name="aliasName"
					type="text">
			</div>
			<div class="fitem">
				<label>机器码license:</label> <input id="mcodeNew" name="mcode"
					type="text"><span id="mcodeTips"></span>
			</div>
			<div class="fitem">
				<label>所属行业:</label> <select id="industryAdd"
					class="easyui-combobox" name="industry"
					data-options="editable:false">
					<option value="0">咖啡厅(COFFEE SHOP)</option>
					<option value="1">西餐厅(WESTERN RESTAURANT)</option>
					<option value="2">中餐厅(CHINESE RESTAURANT)</option>
					<option value="3">茶楼(TEA SHOP)</option>
					<option value="4">会所(CHAMBER)</option>
					<option value="5">便利店(CONVENIENCE STORE)</option>
					<option value="6">饮品店(DRINK SHOP)</option>
					<option value="7">小区(HOUSINGESTATE)</option>
					<option value="8">出租屋(LET)</option>
					<option value="9">学校(SCHOOL)</option>
					<option value="10">工厂(FACTORY)</option>
					<option value="11">公司(COMPANY)</option>
					<option value="12">其它(OTHER)</option>
				</select>
			</div>
			<div class="fitem">
				<label>硬性断开时间:</label> <input id="turnOffTime" name="turnOffTime"
					type="text" data-options="required:true" value="0" />
			</div>
			<div class="fitem">
				<label>空闲断开时间:</label> <input id="turnOffFreeTime"
					name="turnOffFreeTime" type="text" data-options="required:true"
					value="0" />
			</div>
			<div class="fitem">
				<label>多终端登录:</label> <input style="width: 20px;"
					id="multiTerminalLogin" name="multiTerminalLogin" type="radio"
					value="0" data-options="required:true"> 禁止
				&nbsp;&nbsp;&nbsp;&nbsp; <input style="width: 20px;"
					id="multiTerminalLogin" name="multiTerminalLogin" type="radio"
					value="1" data-options="required:true" checked> 允许<br />
			</div>
			<div class="fitem">
				<label>单IP限速:</label> <input style="width: 20px;"
					id="limitSpeedNoNew" name="limitSpeed" type="radio" value="0"
					data-options="required:true" checked
					onclick="hide('isLimitSpeedNew')"> 不启用
				&nbsp;&nbsp;&nbsp;&nbsp; <input style="width: 20px;"
					id="limitSpeedYesNew" name="limitSpeed" type="radio" value="1"
					data-options="required:true" onclick="show('isLimitSpeedNew')">
				启用<br />
			</div>
			<div id="isLimitSpeedNew" class="fitem">
				&nbsp;&nbsp;&nbsp;&nbsp;<label>总下载宽带:</label> <input
					id="totalLimitIncoming" name="totalLimitIncoming" type="text"
					data-options="required:true" /><br /> &nbsp;&nbsp;&nbsp;&nbsp;<label>总上传带宽:</label>
				<input id="totalLimitOutgoing" name="totalLimitOutgoing" type="text"
					data-options="required:true" /><br /> &nbsp;&nbsp;&nbsp;&nbsp;<label>每用户下载带宽:</label>
				<input id="eachLimitIncoming" name="eachLimitIncoming" type="text"
					data-options="required:true" /><br /> &nbsp;&nbsp;&nbsp;&nbsp;<label>每用户上传带宽:</label>
				<input id="eachLimitOutgoing" name="eachLimitOutgoing" type="text"
					data-options="required:true" /><br />

			</div>
			<div class="fitem">
				<label>开放开始时间:</label> <input id="startTime"
					class="easyui-timespinner" name="startTime" required="required"
					data-options="showSeconds:true" value="00:00:00" />
			</div>
			<div class="fitem">
				<label>开放结束时间:</label> <input id="endTime"
					class="easyui-timespinner" name="endTime" required="required"
					data-options="showSeconds:true" value="23:59:59" />
			</div>
			<div class="fitem">
				<label>重定向页面:</label> <input id="portalUrl" name="portalUrl"
					type="text" />
			</div>

			<div class="fitem">
				<label>是否激活:</label> <input style="width: 20px;" id="nodeStatus"
					name="nodeStatus" type="radio" value="0"
					data-options="required:true" checked="true"> 是
				&nbsp;&nbsp;&nbsp;&nbsp; <input style="width: 20px;" id="nodeStatus"
					name="nodeStatus" type="radio" value="1"
					data-options="required:true"> 否
			</div>

			<div class="fitem">
				<label>认证方式:</label> <select id="loginTypeAdd"
					class="easyui-combobox" name="loginType" style="width: 200px;"
					data-options="editable:false">
					<option value="1">不需认证</option>
					<option value="2">用户认证</option>
					<option value="3">短信验证码认证</option>
				</select>
			</div>
			<div id="smsInfoNew" class="fitem">
				&nbsp;&nbsp;&nbsp;&nbsp;<label>短信验证码内容:</label> 
				<input id="smsVerifyTemplateNew" name="smsVerifyTemplate"><br />
				&nbsp;&nbsp;&nbsp;&nbsp;<label>短信验证码长度:</label> <input
					id="smsCodeLengthNew" name="smsCodeLength"/>
			<br /> &nbsp;&nbsp;&nbsp;&nbsp;<label>一天获取次数:</label>
				<input id="smsCodeDayNumNew" name="smsCodeDayNum" value="3"/>
					<br/> &nbsp;&nbsp;&nbsp;&nbsp;<label>获取间隔:</label>
				<input id="smsCodeObtainIntervalNew" name="smsCodeObtainInterval"/>分钟<br />
				&nbsp;&nbsp;&nbsp;&nbsp;<label>验证码类型:</label>
				<input style="width: 20px;" id="smsType"
					name="smsType" type="radio" value="1"
					data-options="required:true" checked="true"> 一次性
				&nbsp;&nbsp;&nbsp;&nbsp; <input style="width: 20px;" id="smsType"
					name="smsType" type="radio" value="2"
					data-options="required:true"> 可多次登录<br />
				&nbsp;&nbsp;&nbsp;&nbsp;<label>验证码有效时间:</label>
				<select id="smsCodeValidTimeTypeNew"
					class="easyui-combobox" name="smsCodeValidTimeType" style="width: 200px;"
					data-options="editable:false">
					<option value="1">分钟(从获取验证码开始计算)</option>
					<option value="2" selected>小时(从获取验证码开始计算)</option>
					<option value="3">天(从获取验证码开始计算)</option>
				</select>
				<input id="smsCodeValidTimeNew" name="smsCodeValidTime" style="width: 50px;" value="2"/>
			</div>
		</form>
	</div>
	<div id="addNodeDlg-button">
		<a href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-ok" onClick="saveNewNode()">增加</a> <a
			href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-cancel"
			onClick="javascript:$('#addNodeDlg').dialog('close')">取消</a>
	</div>
	
		<div id="upgradeDlg1" class="easyui-dialog"
		style="width: 350px; border: 0PX; BORDER-TOP: 1PX solid #DADADA;; height: 250px; padding: 10px 20px 20PX 10PX;"
		closed="true" buttons="#upgradeDlg1-button">
		<form id="upgradeForm1" method="POST" novalidate>
		<input type="hidden" id="nodeID" name="nodeID"/>
			<div class="ftitle">热点升级</div>
			<div class="fitem">
				<label style="width: 70px;">可用余额:</label> <span><font id="remainAcount"></font></span>
			</div>
			<div class="fitem">
				<label style="width: 70px;">热点等级:</label> <span><font id="nodeLever"></font></span>
			</div>
			<div class="fitem">
				<label style="width: 70px;">截至时间:</label> <span><font id="endTime"></font></span>
			</div>
			<div class="fitem" style="margin-top:5px">
				<label style="width: 70px;">vip套餐:</label> 
					<input id="upgradeLeverID" name="upgradeLeverID"
						style="width: 140px; height: 24px;"
						data-options="editable:false,required:true" />
			</div>
			<div class="fitem" style="margin-top:5px">
				<label style="width: 70px;">时间:</label> 
					<input id="validTimeType" name="validTimeType" class="easyui-combobox" style="width: 70px; height: 24px;"/>
					<input id="validTime" name="validTime" class="easyui-combobox" style="width: 70px; height: 24px;"/>
			</div>
			<div class="fitem">
				<label style="width: 70px;">总价:</label> <span><font id="totalPrice"></font></span>
			</div>
		</form>
	</div>
	<div id="upgradeDlg1-button">
		<a href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-ok" onClick="saveUpgrade()">升级</a> <a
			href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-cancel" onClick="javascript:$('#upgradeDlg1').dialog('close')">取消</a>
	</div>
	
			<div id="upgradeDlg2" class="easyui-dialog"
		style="width: 350px; border: 0PX; BORDER-TOP: 1PX solid #DADADA;; height: 250px; padding: 10px 20px 20PX 10PX;"
		closed="true" buttons="#upgradeDlg2-button">
		<form id="upgradeForm2" method="POST" novalidate>
		<input type="hidden" id="nodeID2" name="nodeID"/>
			<div class="ftitle">热点升级</div>
			<div class="fitem">
				<label style="width: 70px;">可用余额:</label> <span><font id="remainAcount2"></font></span>
			</div>
			<div class="fitem">
				<label style="width: 70px;">热点等级:</label> <span><font id="nodeLever2"></font></span>
			</div>
			<div class="fitem">
				<label style="width: 70px;">截至时间:</label> <span><font id="endTime2"></font></span>
			</div>
			<div class="fitem" style="margin-top:5px">
				<label style="width: 70px;">vip套餐:</label> 
					<input id="upgradeLeverID2" name="upgradeLeverID"
						style="width: 140px; height: 24px;"
						data-options="editable:false,required:true" />
			</div>
			<div class="fitem">
				<label style="width: 70px;">总价:</label> <span><font id="totalPrice2"></font></span>
			</div>
		</form>
	</div>
	<div id="upgradeDlg2-button">
		<a href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-ok" onClick="saveUpgrade2()">升级</a> <a
			href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-cancel" onClick="javascript:$('#upgradeDlg2').dialog('close')">取消</a>
	</div>
	
	<div id="renewalDlg" class="easyui-dialog"
		style="width: 350px; border: 0PX; BORDER-TOP: 1PX solid #DADADA;; height: 250px; padding: 10px 20px 20PX 10PX;"
		closed="true" buttons="#renewalDlg-button">
		<form id="renewalForm" method="POST" novalidate>
		<input type="hidden" id="renewalNodeID" name="nodeID"/>
			<div class="ftitle">热点升级</div>
			<div class="fitem">
				<label style="width: 70px;">可用余额:</label> <span><font id="renewalRemainAcount"></font></span>
			</div>
			<div class="fitem">
				<label style="width: 70px;">热点等级:</label> <span><font id="renewalNodeLever"></font></span>
			</div>
			<div class="fitem">
				<label style="width: 70px;">截至时间:</label> <span><font id="renewalEndTime"></font></span>
			</div>
			<div class="fitem" style="margin-top:5px">
				<label style="width: 70px;">时间:</label> 
					<input id="renewalValidTimeType" name="validTimeType" class="easyui-combobox" style="width: 70px; height: 24px;"/>
					<input id="renewalValidTime" name="validTime" class="easyui-combobox" style="width: 70px; height: 24px;"/>
			</div>
			<div class="fitem">
				<label style="width: 70px;">总价:</label> <span><font id="renewalTotalPrice"></font></span>
			</div>
		</form>
	</div>
	<div id="renewalDlg-button">
		<a href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-ok" onClick="saveRenewal()">续期</a> <a
			href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-cancel" onClick="javascript:$('#renewalDlg').dialog('close')">取消</a>
	</div>
</body>
</html>